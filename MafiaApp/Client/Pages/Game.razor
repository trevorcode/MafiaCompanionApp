@page "/play"
@inject GameConnection connection
@inject NavigationManager navMan
@implements IDisposable


@if (!(connection.Room is null))
{
    @if (connection.Room.GameState.State == MafiaApp.Shared.GameStates.Lobby)
    {
        <LobbyViewComponent></LobbyViewComponent>
    }
    

}


@code {
    protected override void OnInitialized()
    {
        connection.OnChange += StateHasChanged;

        if (connection.Room == null)
        {
            navMan.NavigateTo("/");
        }
    }

    public void Dispose()
    {
        connection.OnChange -= StateHasChanged;
    }
}
